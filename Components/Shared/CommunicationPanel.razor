@rendermode InteractiveServer

<div class="card">
    <div class="card-body">
        <h5 class="mb-4">Communication</h5>

        <!-- Messages/Chat Area -->
        <div class="border rounded p-3 mb-3" style="background-color: #f8f9fa; min-height: 300px; max-height: 400px; overflow-y: auto;">
            <div class="mb-3">
                <div class="d-flex justify-content-end mb-2">
                    <div class="bg-primary text-white p-2 rounded" style="max-width: 70%;">
                        <small>Claim created and submitted for review.</small>
                        <div style="font-size: 0.75rem; margin-top: 5px;">@DateTime.Now.ToString("MM/dd/yyyy hh:mm tt")</div>
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <div class="d-flex justify-content-start mb-2">
                    <div class="bg-light border p-2 rounded" style="max-width: 70%;">
                        <small><strong>System:</strong> Claim has been assigned to an adjuster.</small>
                        <div style="font-size: 0.75rem; margin-top: 5px; color: #666;">@DateTime.Now.AddMinutes(-10).ToString("MM/dd/yyyy hh:mm tt")</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Message Input -->
        <div class="input-group">
            <input type="text" 
                   class="form-control" 
                   placeholder="Type your message..." 
                   @bind="MessageText" />
            <button class="btn btn-primary" @onclick="SendMessage">
                <i class="bi bi-send"></i> Send
            </button>
        </div>

        <!-- Communication Options -->
        <div class="mt-4">
            <h6>Contact Information</h6>
            <div class="list-group">
                <div class="list-group-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Assigned Adjuster</h6>
                            <small class="text-muted">adjuster@example.com | (555) 123-4567</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary">Contact</button>
                    </div>
                </div>
                <div class="list-group-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">Claimant</h6>
                            <small class="text-muted">claimant@example.com | (555) 987-6543</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary">Contact</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public string ClaimNumber { get; set; } = string.Empty;

    private string MessageText = string.Empty;

    private void SendMessage()
    {
        if (!string.IsNullOrWhiteSpace(MessageText))
        {
            // Message would be sent to service
            MessageText = string.Empty;
        }
    }
}
