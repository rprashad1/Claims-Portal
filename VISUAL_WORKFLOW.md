# Visual Workflow - Complete Step-by-Step

## The Complete Journey

```
??????????????????????????????????????????????????????????????????
?                  STEP 3: DRIVER & INJURY                      ?
??????????????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????????????
?                                                                  ?
?  SECTION 1: DRIVER INFORMATION                                 ?
?  ?????????????????????????????????????????????????????????  ?
?                                                                  ?
?  ? Insured was the Driver          ? Select one               ?
?  ? Driver is Listed on Policy                                 ?
?  ? Driver is NOT Listed on Policy                             ?
?      ?? Enter: Name, License #, State                         ?
?                                                                  ?
?  ?? Driver Name: [Insured / John Doe]                          ?
?                                                                  ?
???????????????????????????????????????????????????????????????????
                          ?
???????????????????????????????????????????????????????????????????
?                                                                  ?
?  SECTION 2: INJURY STATUS                                      ?
?  ?????????????????????????????????????????????????????????  ?
?                                                                  ?
?  Was the driver injured?                                       ?
?  ? Yes                                                          ?
?  ? No                         ? Choose...                      ?
?                                                                  ?
???????????????????????????????????????????????????????????????????

              YES ?                        ? NO
              
    ????????????????????????????   ??????????????????????
    ? INJURY DETAILS           ?   ? Skip to Save       ?
    ????????????????????????????   ??????????????????????
    ? Nature: [dropdown] *     ?   ?                    ?
    ? Date: [date picker] *    ?   ? (No injury = no    ?
    ? Description: [text] *    ?   ?  feature created)  ?
    ? Fatality: [checkbox]     ?   ??????????????????????
    ? Hospital: [checkbox]     ?
    ? Hospital Name: [text]    ?
    ? Hospital Address: [text] ?
    ????????????????????????????
              ?
    ????????????????????????????????????????????
    ? ATTORNEY REPRESENTATION (IF INJURED)    ?
    ????????????????????????????????????????????
    ? Is attorney represented?                ?
    ? ? Yes                                    ?
    ? ? No                                     ?
    ?                                          ?
    ? IF YES ? Fill:                          ?
    ? - Attorney Name *                       ?
    ? - Firm Name *                           ?
    ? - Phone                                 ?
    ? - Email                                 ?
    ? - Address                               ?
    ????????????????????????????????????????????
              ?
    ??????????????????????????????????????????
    ?  ?? SAVE DRIVER & CREATE FEATURE      ?
    ?                                        ?
    ?  [LARGE PRIMARY BUTTON]               ?
    ?                                        ?
    ?  ? Validates all fields               ?
    ?  ? Opens feature modal                ?
    ?  ? Marks driver complete              ?
    ??????????????????????????????????????????
              ?
    ???????????????????????????????????????
    ?  FEATURE CREATION MODAL              ?
    ???????????????????????????????????????
    ?  Create Feature for [Insured]        ?
    ?  ??????????????????????????????????? ?
    ?                                      ?
    ?  ??  Claimant: [Driver Name]          ?
    ?                                      ?
    ?  Coverage Type/Limits *              ?
    ?  [? Select Coverage ??????????????]  ?
    ?   ?? BI - 100/300                   ?
    ?   ?? PD - 50,000                    ?
    ?   ?? PIP - 10,000                   ?
    ?   ?? APIP - 150,000                 ?
    ?   ?? UM - 25,000                    ?
    ?                                      ?
    ?  ?? RESERVE SETUP ????????????????  ?
    ?  ? Expense Reserve *  $ [5000.00]  ?  ?
    ?  ? Indemnity Reserve * $ [25000.00]?  ?
    ?  ??????????????????????????????????  ?
    ?                                      ?
    ?  Assign Adjuster *                   ?
    ?  [? Select Adjuster ???????????????] ?
    ?   ?? Raj                            ?
    ?   ?? Edwin                          ?
    ?   ?? Constantine                    ?
    ?   ?? Joan                           ?
    ?                                      ?
    ?  ?? SUMMARY ??????????????????????  ?
    ?  ? Coverage: BI - 100/300          ?  ?
    ?  ? Expense: $5,000.00              ?  ?
    ?  ? Indemnity: $25,000.00           ?  ?
    ?  ? Assigned: Raj                   ?  ?
    ?  ??????????????????????????????????  ?
    ?                                      ?
    ?  [Cancel]  [? Create Feature]      ?
    ???????????????????????????????????????
              ?
    ??????????????????????????????????????????
    ?  Feature Created & Saved              ?
    ?  Modal closes automatically           ?
    ?  Grid updates with new feature        ?
    ?  DriverSaved = true                   ?
    ?  Next button enabled                  ?
    ??????????????????????????????????????????
              ?
    ????????????????????????????????????????????????
    ?  ?? CREATED FEATURES/SUB-CLAIMS             ?
    ????????????????????????????????????????????????
    ?  Feat?Coverage    ?Claimant?Exp Res?Ind Res?
    ????????????????????????????????????????????????
    ? 01   ?BI - 100/300? Insured? $5K   ? $25K  ?
    ?      ?            ?        ?       ?   ?? ??? ?
    ????????????????????????????????????????????????
              ?
    ????????????????????????????????????????????
    ?  SECTION 3: PASSENGERS                   ?
    ????????????????????????????????????????????
    ?  [+ Add Passenger]                      ?
    ?                                          ?
    ?  (Passenger list appears here)           ?
    ?                                          ?
    ?  Same feature workflow as driver        ?
    ?  (Add injury ? Create features)         ?
    ????????????????????????????????????????????
              ?
    ??????????????????????????????????????????
    ?  ??  READY FOR STEP 4                  ?
    ?  [Next Button Enabled]                ?
    ??????????????????????????????????????????
```

---

## State Machine

```
???????????????
?   START     ?
???????????????
       ?
       ?
???????????????????????????
? DriverSaved = false     ?
? IsNextDisabled = true   ?
???????????????????????????
       ?
       ???? User fills driver info ????????
       ?                                   ?
       ?                          ????????????????
       ?                          ? IsDriverInjured?
       ?                          ? ? Yes / ? No
       ?                          ???????????????
       ?                             ?     ?
       ?                        YES  ?     ?  NO
       ?                            ?     ?
       ?                  ??????????????? ????????????
       ?                  ? Injury      ? ? Skip     ?
       ?                  ? Details     ? ? Attorney ?
       ?                  ? & Attorney  ? ?          ?
       ?                  ??????????????? ????????????
       ?                       ?               ?
       ?       ?????????????????????????????????
       ?       ?                               ?
       ? ???????????????????????????????????? ?
       ? ? Click: Save Driver &            ? ?
       ? ? Create Feature                  ? ?
       ? ???????????????????????????????????? ?
       ?                         ?            ?
       ?                    YES  ?     NO ?????
       ?                  ????????????????
       ?                  ? Feature Modal?
       ?                  ? Opens        ?
       ?                  ????????????????
       ?                          ?
       ?                    ??????????????
       ?                    ? User fills: ?
       ?                    ? • Coverage  ?
       ?                    ? • Reserves  ?
       ?                    ? • Adjuster  ?
       ?                    ???????????????
       ?                          ?
       ?                    ??????????????????????
       ?                    ? Click: Create     ?
       ?                    ? Feature           ?
       ?                    ?????????????????????
       ?                          ?
       ?                ?????????????????????
       ?                ? Feature Saved     ?
       ?                ? Modal Closes      ?
       ?                ? Grid Updates      ?
       ?                ? DriverSaved=true  ?
       ?                ?????????????????????
       ?                          ?
       ????????????????????????????
                                  ?
                                  ?
                        ????????????????????
                        ? DriverSaved=true ?
                        ? IsNextDisabled=  ?
                        ?   false          ?
                        ????????????????????
                                 ?
                                 ?
                        ????????????????????
                        ? Next Button      ?
                        ? ENABLED ?       ?
                        ????????????????????
                                 ?
                                 ?
                        ????????????????????
                        ? User clicks Next ?
                        ? ? Step 4         ?
                        ????????????????????
```

---

## Decision Points

```
POINT 1: Driver Injury?
?? YES ? Capture injury details + attorney details
?        ? Open feature modal
?        ? Create sub-claim
?        ? Mark as complete
?
?? NO  ? Skip injury section
         ? Mark driver as complete immediately
         ? Ready for next step


POINT 2: Attorney Representation?
?? YES ? Require attorney name & firm
?
?? NO  ? Skip attorney fields
         ? Still create feature (if injured)


POINT 3: Required Fields Filled?
?? YES ? Enable Save button
?        ? Save works
?
?? NO  ? Disable Save button
         ? Show as grayed out
```

---

## Key Transitions

```
User fills form
     ?
Save button validation
     ?? All valid?
     ?  ?? YES ? Button ENABLED
     ?  ?? NO  ? Button DISABLED
     ?
Click Save button
     ?? Injured?
     ?  ?? YES ? Open Feature Modal
     ?  ?? NO  ? Mark complete, Next enabled
     ?
Fill Feature Details
     ?? All valid?
     ?  ?? YES ? Create button ENABLED
     ?  ?? NO  ? Create button DISABLED
     ?
Click Create Feature
     ?? Feature added to list
     ?? Grid re-renders
     ?? Modal closes
     ?? DriverSaved = true
     ?? Next button enabled
```

---

## Data Persistence

```
User Input
    ?
    ??? DriverInfo
    ??? InjuryInfo
    ??? AttorneyInfo
         (Stored in component state)
    ?
    ??? Feature Modal
         ??? SubClaim object
         ?
    ??? DriverSubClaims list
         ?
    ??? Feature Grid display
         ?
    ??? OnNext event
         ??? FnolNew component
         ??? CurrentClaim object
         ??? Passed to Step 4
```

---

## Summary of States

| State Variable | Default | When True | Effect |
|---|---|---|---|
| `DriverSaved` | false | After feature created or no injury | Enables Next button |
| `IsDriverInjured` | false | User selects Yes | Shows attorney section |
| `HasAttorney` | false | User selects Yes | Requires attorney fields |
| `IsNextDisabled` | true | `!DriverSaved` | Next button grayed out |

---

## User Actions & System Responses

| Action | Condition | Response |
|---|---|---|
| Select driver type | Any | Driver name updates |
| Fill driver name | Unlisted | Validates for next step |
| Select "Yes" for injury | - | Shows injury fields |
| Fill injury details | All complete | Attorney section appears |
| Select "Yes" for attorney | - | Shows attorney fields |
| Fill attorney details | All complete | Save button enabled |
| Click Save button | Injured=true | Feature modal opens |
| Click Save button | Injured=false | DriverSaved=true, Next enabled |
| Create feature | All fields valid | Feature added, grid updates |
| Edit feature | In grid | Modal opens with values |
| Delete feature | In grid | Feature removed, others renumbered |
| Click Next | DriverSaved=true | Proceed to Step 4 |

This workflow is now crystal clear and intuitive! ??

